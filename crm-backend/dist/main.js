(()=>{"use strict";(function(){const e=document.querySelector(".header-contacts__arrow"),t=document.querySelector(".header-contacts__phone-number-accord");let n=!1;e.addEventListener("click",(function(){n=!n,n?(this.style.transform="rotate(180deg)",t.style.top="25px",t.firstElementChild.style.opacity=1):(this.style.transform="rotate(0deg)",t.style.top="0px",t.firstElementChild.style.opacity=0)}))})(),function(){const e=document.querySelector(".header"),t=document.querySelector(".popup-dialog-menu"),n=document.querySelector(".close-menu"),l=document.querySelectorAll(".menu-link"),o=document.querySelector(".popup-repair-types"),r=(document.querySelector(".menu-link.no-overflow"),document.querySelectorAll(".link-popuprepair")),a=document.querySelectorAll(".close");let c=!1;window.addEventListener("resize",(function(){document.body.clientWidth<576?t.style.transform="translate3d(0, -715px, 0)":t.style.transform="translate3d(645px, 0, 0)"})),e.addEventListener("click",(e=>{e.target.closest(".menu")&&(t.style.transform="translate3d(0, 0, 0)",setTimeout((()=>{c=!0}),700))})),document.onkeydown=e=>{c&&"Escape"==e.key&&(c=!1,t.style.transform="translate3d(645px, 0, 0)")},document.addEventListener("click",(e=>{if(c&&(e.preventDefault(),!e.target.contains(n)&&e.target.closest(".popup-dialog-menu")||(c=!1,document.body.clientWidth<576?t.style.transform="translate3d(0, -715px, 0)":t.style.transform="translate3d(645px, 0, 0)"),l.forEach((n=>{if(n.hash.length>2){let l;e.target.contains(n)&&e.target.closest("a")&&(l=Math.round(document.querySelector(n.hash).getBoundingClientRect().top+window.pageYOffset),c=!1,t.style.transform="translate3d(645px, 0, 0)",((e,t)=>{let n=Math.round(+t/2e3);requestAnimationFrame((function e(){document.documentElement.scrollTop<t?(document.documentElement.scrollTop=document.documentElement.scrollTop+25*n,requestAnimationFrame(e)):document.documentElement.scrollTop=t}))})(0,l))}}))),e.target==document.querySelector('[href="#main"]')){e.preventDefault();let t=requestAnimationFrame((function e(){document.documentElement.scrollTop=document.documentElement.scrollTop-100,document.documentElement.scrollTop<100?(document.documentElement.scrollTop=0,cancelAnimationFrame(t)):requestAnimationFrame(e)}))}e.target.closest(".menu-link.no-overflow")&&(o.style.visibility="visible",c&&(c=!1,document.body.clientWidth<576?t.style.transform="translate3d(0, -715px, 0)":t.style.transform="translate3d(645px, 0, 0)"))})),r.forEach((e=>{e.addEventListener("click",(()=>{o.style.visibility="visible"}))})),a.forEach((e=>{e.addEventListener("click",(()=>{o.style.visibility="hidden"}))}))}(),document.querySelectorAll("[name = phone]").forEach((e=>{e.addEventListener("input",(()=>{16===e.value.length&&e.blur(),e.value.length>16?e.value=e.value.substr(0,16):e.value=e.value.replace(/[^\d\(\)\-\+]/,""),e.value.length>7&&(/^[\+][\d][\(][\d][\d][\d][\)]/.test(e.value)||(e.value="+7"))})),e.addEventListener("keyup",(t=>{if(console.log(t.key),"("!=t.key&&")"!=t.key&&"-"!=t.key&&"+"!=t.key||(e.value=e.value.slice(0,-1)),5==e.value.length){let t=e.value.substr(-3);/^\d+$/.test(t)?e.value=`+7(${t})`:e.value="+7"}else(10==e.value.length&&"Backspace"!==t.key&&"Delete"!==t.key||13==e.value.length&&"Backspace"!==t.key&&"Delete"!==t.key)&&(e.value=`${e.value}-`)})),e.addEventListener("focus",(()=>{e.value.length<2&&(e.value="+7 ")})),e.addEventListener("blur",(()=>{e.value.length<4&&(e.value="")}))}))})();