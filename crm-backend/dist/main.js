(()=>{"use strict";(function(){const e=document.querySelector(".header-contacts__arrow"),t=document.querySelector(".header-contacts__phone-number-accord");let l=!1;e.addEventListener("click",(function(){l=!l,l?(this.style.transform="rotate(180deg)",t.style.top="25px",t.firstElementChild.style.opacity=1):(this.style.transform="rotate(0deg)",t.style.top="0px",t.firstElementChild.style.opacity=0)}))})(),function(){const e=document.querySelector(".header"),t=document.querySelector(".popup-dialog-menu"),l=document.querySelector(".close-menu"),n=document.querySelectorAll(".menu-link"),o=document.querySelector(".popup-repair-types"),r=(document.querySelector(".menu-link.no-overflow"),document.querySelectorAll(".link-popuprepair")),a=document.querySelectorAll(".close"),c=document.querySelectorAll(".link-privacy"),i=document.querySelector(".popup-privacy"),s=(document.querySelectorAll(".formula-item-popup"),document.querySelectorAll(".formula-item__icon"));let u=!1,d=!1;window.addEventListener("resize",(function(){document.body.clientWidth<576?t.style.transform="translate3d(0, -715px, 0)":t.style.transform="translate3d(645px, 0, 0)"})),e.addEventListener("click",(e=>{e.target.closest(".menu")&&(t.style.transform="translate3d(0, 0, 0)",setTimeout((()=>{d=!0}),700))})),document.onkeydown=e=>{d&&"Escape"==e.key&&(d=!1,t.style.transform="translate3d(645px, 0, 0)"),u&&"Escape"==e.key&&(u=!1,i.style.visibility="hidden")},document.addEventListener("click",(e=>{if(d&&(e.preventDefault(),!e.target.contains(l)&&e.target.closest(".popup-dialog-menu")||(d=!1,document.body.clientWidth<576?t.style.transform="translate3d(0, -715px, 0)":t.style.transform="translate3d(645px, 0, 0)"),n.forEach((l=>{if(l.hash.length>2){let n;e.target.contains(l)&&e.target.closest("a")&&(n=Math.round(document.querySelector(l.hash).getBoundingClientRect().top+window.pageYOffset),d=!1,t.style.transform="translate3d(645px, 0, 0)",((e,t)=>{let l=Math.round(+t/2e3);requestAnimationFrame((function e(){document.documentElement.scrollTop<t?(document.documentElement.scrollTop=document.documentElement.scrollTop+25*l,requestAnimationFrame(e)):document.documentElement.scrollTop=t}))})(0,n))}}))),e.target==document.querySelector('[href="#main"]')){e.preventDefault();let t=requestAnimationFrame((function e(){document.documentElement.scrollTop=document.documentElement.scrollTop-100,document.documentElement.scrollTop<100?(document.documentElement.scrollTop=0,cancelAnimationFrame(t)):requestAnimationFrame(e)}))}e.target.closest(".menu-link.no-overflow")&&(o.style.visibility="visible",d&&(d=!1,document.body.clientWidth<576?t.style.transform="translate3d(0, -715px, 0)":t.style.transform="translate3d(645px, 0, 0)"))})),c.forEach((e=>{e.addEventListener("click",(()=>{i.style.visibility="visible",u=!0}))})),r.forEach((e=>{e.addEventListener("click",(()=>{o.style.visibility="visible"}))})),a.forEach((e=>{e.addEventListener("click",(()=>{o.style.visibility="hidden",u&&(u=!1,i.style.visibility="hidden")}))})),s.forEach((e=>{let t=document.head.appendChild(document.createElement("style"));e.addEventListener("mouseover",(()=>{if(e.closest(".mobile-hide")){let l=e.getBoundingClientRect().top,n=e.firstElementChild.clientHeight,o=e.clientHeight;l<n&&(e.firstElementChild.style.transform=`translateY(${n+o+45}px)`,t.innerText=`.formula-item-popup-${e.children[2].textContent}:before {transform: rotate(180deg);}`),e.classList.add("active-item")}})),e.addEventListener("mouseout",(()=>{e.classList.remove("active-item")}))}))}(),document.querySelectorAll("[name = phone]").forEach((e=>{e.addEventListener("input",(()=>{16===e.value.length&&e.blur(),e.value.length>16?e.value=e.value.substr(0,16):e.value=e.value.replace(/[^\d\(\)\-\+]/,""),e.value.length>7&&(/^[\+][\d][\(][\d][\d][\d][\)]/.test(e.value)||(e.value="+7"))})),e.addEventListener("keyup",(t=>{if(console.log(t.key),"("!=t.key&&")"!=t.key&&"-"!=t.key&&"+"!=t.key||(e.value=e.value.slice(0,-1)),5==e.value.length){let t=e.value.substr(-3);/^\d+$/.test(t)?e.value=`+7(${t})`:e.value="+7"}else(10==e.value.length&&"Backspace"!==t.key&&"Delete"!==t.key||13==e.value.length&&"Backspace"!==t.key&&"Delete"!==t.key)&&(e.value=`${e.value}-`)})),e.addEventListener("focus",(()=>{e.value.length<2&&(e.value="+7 ")})),e.addEventListener("blur",(()=>{e.value.length<4&&(e.value="")}))}))})();